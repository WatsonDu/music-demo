"use strict";var APP_ID="oysuL2dORvTNIna81kWEojQM-gzGzoHsz";var APP_KEY="RuAWNvvWTsPo21IHHUViSmgV";AV.init({appId:APP_ID,appKey:APP_KEY});var $olSongs=$("ol#songs");var query=new AV.Query("Song");query.find().then(function(results){for(var i=0;i<results.length;i++){var song=results[i].attributes;var li='\n        <li>\n        <a href="./song.html?id='+results[i].id+'">\n        <h3>'+song.name+'</h3>\n            <P><i class="#icon-sq"></i>'+song.singer+'</P>\n            <div class="playButton"></div>\n        </a>\n        </li>';$olSongs.append(li)}});var $olhotSongs=$("ol#hotsongs");var query=new AV.Query("Song");query.find().then(function(results){for(var i=0;i<results.length;i++){var song=results[i].attributes;if(i<9){var li='\n           <li>\n           <a href="./song.html?id='+results[i].id+'">\n           <div class="bangdan">\n           <div class="number">0'+(i+1)+'</div>\n           <div class="geming"><h3>'+song.name+'<small></small></h3>\n           <p><i class="#icon-sq"></i>'+song.singer+'</p>\n           </div>\n            <div class="action">\n            <div class="playButton"></div>\n           </div>\n           </div>\n            </a>\n           </li>';$olhotSongs.append(li)}else{var _li='\n           <li>\n           <a href="./song.html?id='+results[i].id+'">\n           <div class="bangdan">\n           <div class="number">'+(i+1)+'</div>\n           <div class="geming"><h3>'+song.name+'<small></small></h3>\n           <p><i class="#icon-sq"></i>'+song.singer+'</p>\n           </div>\n            <div class="action">\n            <div class="playButton"></div>\n           </div>\n           </div>\n            </a>\n           </li>';$olhotSongs.append(_li)}}});var close=function close(){$("#search").val("");$(".close").removeClass("active");$("#searchResult").empty();$(".default").show();$(".holder").removeClass("active");$(".search-content").hide();$(".hotlist").removeClass("active")};$(".close").on("click",function(){return close()});var timer=null;$("input#search").on("input",function(e){if(timer){clearTimeout(timer)}timer=setTimeout(function(){timer=null;var $input=$(e.currentTarget);var value=$input.val().trim();if(value===""){return close()}var query2=new AV.Query("Song");query2.contains("name",value);var query1=new AV.Query("Song");query1.contains("singer",value);var query=AV.Query.or(query1,query2);query.find().then(function(results){$("#searchResult").empty();$(".close").addClass("active");$(".hotlist").addClass("active");$(".holder").addClass("active");$(".search-content").html('<h3>搜索"'+value+'"</h3>').show();if(results.length===0){$("#searchResult").html("<h3>搜索不到</h3>")}else{for(var i=0;i<results.length;i++){var song=results[i].attributes;var li='\n                <li data-id="'+results[i].id+'">\n                <i class="tubiao"></i>\n                <a href="./song.html?id='+results[i].id+'">'+song.name+" - "+song.singer+"</a>\n        </li>\n        ";$("#searchResult").append(li)}if(value===""){return close()}}})},500)});
